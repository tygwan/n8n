{
  "name": "Agent 1 - Market Insight (Blue Ocean Finder)",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "days",
              "triggerAtHour": 9
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "Daily 9AM Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [0, 300]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://jsonplaceholder.typicode.com/posts",
        "options": {}
      },
      "id": "http-tiktok",
      "name": "Get TikTok Trends (Mock)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [220, 200],
      "notes": "Replace with actual TikTok Trends API"
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://jsonplaceholder.typicode.com/users",
        "options": {}
      },
      "id": "http-competitor",
      "name": "Get Competitor Data (Mock)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [220, 400],
      "notes": "Replace with competitor mission database"
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// Market Insight - Blue Ocean Analysis\n// Merge TikTok trends and competitor data\n\nconst mockTrends = [\n  { keyword: '#DeskSetup', growth_rate: 150, views: 500000, category: 'Lifestyle' },\n  { keyword: '#TechMinimalist', growth_rate: 180, views: 400000, category: 'Tech' },\n  { keyword: '#WFH', growth_rate: 120, views: 300000, category: 'Lifestyle' },\n  { keyword: '#CodingASMR', growth_rate: 200, views: 250000, category: 'Tech' },\n  { keyword: '#MorningRoutine', growth_rate: 95, views: 600000, category: 'Lifestyle' }\n];\n\nconst mockCompetitorMissions = [\n  { keyword: '#MorningRoutine', mission_count: 12, platform: 'CompetitorA' },\n  { keyword: '#BeautyHacks', mission_count: 15, platform: 'CompetitorB' },\n  { keyword: '#FoodASMR', mission_count: 8, platform: 'CompetitorA' }\n];\n\n// Find Blue Ocean opportunities\nconst competitorKeywords = new Set(\n  mockCompetitorMissions.map(m => m.keyword.toLowerCase())\n);\n\nconst opportunities = mockTrends\n  .filter(t => !competitorKeywords.has(t.keyword.toLowerCase()))\n  .sort((a, b) => b.growth_rate - a.growth_rate);\n\nconst topOpportunity = opportunities[0];\n\nreturn [{\n  json: {\n    analysis_date: new Date().toISOString().split('T')[0],\n    analysis_time: new Date().toISOString(),\n    total_trends_analyzed: mockTrends.length,\n    competitor_coverage: mockCompetitorMissions.length,\n    opportunities_found: opportunities.length,\n    top_opportunity: topOpportunity,\n    all_opportunities: opportunities,\n    competitor_missions: mockCompetitorMissions\n  }\n}];"
      },
      "id": "code-analysis",
      "name": "Analyze Market Gaps",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [440, 300]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¹ì‹ ì€ 10ë…„ì°¨ TikTok/Instagram ë§ˆì¼€íŒ… ì „ëµê°€ì…ë‹ˆë‹¤.\n\n[ë¶„ì„ ë°ì´í„°]\n- ë¶„ì„ ì¼ì: {{ $json.analysis_date }}\n- ë¶„ì„ëœ íŠ¸ë Œë“œ ìˆ˜: {{ $json.total_trends_analyzed }}\n- ê²½ìŸì‚¬ ë¯¸ì…˜ ìˆ˜: {{ $json.competitor_coverage }}\n- ë°œê²¬ëœ ê¸°íšŒ: {{ $json.opportunities_found }}ê°œ\n\n[Top Blue Ocean ê¸°íšŒ]\n- í‚¤ì›Œë“œ: {{ $json.top_opportunity.keyword }}\n- ì„±ì¥ë¥ : {{ $json.top_opportunity.growth_rate }}%\n- ì˜ˆìƒ ì¡°íšŒìˆ˜: {{ $json.top_opportunity.views }}\n- ì¹´í…Œê³ ë¦¬: {{ $json.top_opportunity.category }}\n\n[ì „ì²´ ê¸°íšŒ ëª©ë¡]\n{{ JSON.stringify($json.all_opportunities, null, 2) }}\n\n[ë¶„ì„ ìš”ì²­]\n1. Top ê¸°íšŒ í‚¤ì›Œë“œì— ëŒ€í•´ ë§ˆì´í¬ë¡œ ì¸í”Œë£¨ì–¸ì„œ(10K-50K íŒ”ë¡œì›Œ)ê°€ ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ë¯¸ì…˜ì„ ì„¤ê³„í•˜ì„¸ìš”.\n2. ë¯¸ì…˜ ì œëª©ì—ëŠ” êµ¬ì²´ì ì¸ ë³´ìƒ ê¸ˆì•¡($)ì„ í¬í•¨í•˜ì„¸ìš”.\n3. ì„±ê³µ ë°©ì •ì‹(Hook, Visual, Sound)ì„ ì œì‹œí•˜ì„¸ìš”.\n\n[ì¶œë ¥ í˜•ì‹ - ë°˜ë“œì‹œ JSON]\n{\n  \"keyword\": \"ë°œê²¬ëœ Blue Ocean í‚¤ì›Œë“œ\",\n  \"growth_rate\": \"ì„±ì¥ë¥  %\",\n  \"potential_views\": \"ì˜ˆìƒ ë„ë‹¬ ì¡°íšŒìˆ˜\",\n  \"mission_title\": \"ë¯¸ì…˜ ì œëª© (ë³´ìƒ í¬í•¨, ì˜ˆ: 'ë‹¹ì‹ ì˜ ë°ìŠ¤í¬í…Œë¦¬ì–´ ê¿€í…œì„ ì†Œê°œí•˜ê³  $30 ë°›ìœ¼ì„¸ìš”')\",\n  \"target_creator\": \"íƒ€ê²Ÿ í¬ë¦¬ì—ì´í„° í”„ë¡œí•„\",\n  \"winning_formula\": {\n    \"hook\": \"ì˜ìƒ ì‹œì‘ 5ì´ˆ í›… (ì‹œì²­ì attention ì¡ëŠ” ë°©ë²•)\",\n    \"visual\": \"ë¹„ì£¼ì–¼ ìŠ¤íƒ€ì¼ (ì´¬ì˜ ê¸°ë²•, ì¡°ëª… ë“±)\",\n    \"sound\": \"ì‚¬ìš´ë“œ/BGM ì¶”ì²œ\"\n  },\n  \"strategic_insight\": \"PMì„ ìœ„í•œ ì „ëµì  ì¸ì‚¬ì´íŠ¸ (ì™œ ì´ í‚¤ì›Œë“œê°€ ê¸°íšŒì¸ì§€)\",\n  \"estimated_cpm\": \"ì˜ˆìƒ CPM ($)\",\n  \"mission_budget\": \"ì¶”ì²œ ë¯¸ì…˜ ì˜ˆì‚° ($)\"\n}",
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ìˆí¼ ë°”ì´ëŸ´ ì½˜í…ì¸  ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë§ˆì´í¬ë¡œ ì¸í”Œë£¨ì–¸ì„œ í”Œë«í¼ì˜ PMì„ ìœ„í•´ ë°ì´í„° ê¸°ë°˜ Blue Ocean ì „ëµì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.\n\ní•µì‹¬ ì›ì¹™:\n1. ê²½ìŸì‚¬ê°€ ë†“ì¹œ ê³ ì„±ì¥ í‚¤ì›Œë“œë¥¼ ë°œêµ´í•©ë‹ˆë‹¤.\n2. êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ë¯¸ì…˜ì„ ì„¤ê³„í•©ë‹ˆë‹¤.\n3. ëª¨ë“  ì‘ë‹µì€ JSON í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.\n4. ë³´ìƒ ê¸ˆì•¡ì€ í˜„ì‹¤ì ìœ¼ë¡œ ì±…ì •í•©ë‹ˆë‹¤ ($20-$100 ë²”ìœ„)."
        }
      },
      "id": "ai-agent",
      "name": "AI Strategic Analyst",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [660, 300]
    },
    {
      "parameters": {
        "model": "gpt-4-turbo",
        "options": {
          "temperature": 0.7,
          "maxTokens": 2000
        }
      },
      "id": "openai-model",
      "name": "OpenAI GPT-4 Turbo",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [660, 520]
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// Parse AI response and prepare Slack message\nconst aiResponse = $input.first().json.output || $input.first().json.text || '';\n\nlet parsed;\ntry {\n  const jsonMatch = aiResponse.match(/\\{[\\s\\S]*\\}/);\n  if (jsonMatch) {\n    parsed = JSON.parse(jsonMatch[0]);\n  } else {\n    throw new Error('No JSON found');\n  }\n} catch (e) {\n  parsed = {\n    keyword: 'Parse Error',\n    mission_title: 'AI ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”',\n    potential_views: 'N/A',\n    strategic_insight: aiResponse,\n    winning_formula: { hook: 'N/A', visual: 'N/A', sound: 'N/A' }\n  };\n}\n\nconst reportDate = new Date().toISOString().split('T')[0];\nconst reportId = `MKT-${reportDate}-${Math.random().toString(36).substr(2, 6).toUpperCase()}`;\n\nreturn [{\n  json: {\n    report_id: reportId,\n    report_date: reportDate,\n    ...parsed,\n    pdf_link: `https://your-storage.com/reports/market-insight-${reportDate}.pdf`,\n    raw_ai_response: aiResponse\n  }\n}];"
      },
      "id": "code-parse",
      "name": "Parse AI Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [880, 300]
    },
    {
      "parameters": {
        "resource": "message",
        "operation": "post",
        "channel": {
          "__rl": true,
          "mode": "name",
          "value": "#market-insights"
        },
        "text": "=ğŸš€ *[Market Opportunity Alert]*\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“‹ *Report ID*: {{ $json.report_id }}\nğŸ“… *ë¶„ì„ì¼*: {{ $json.report_date }}\n\nğŸ”µ *Blue Ocean í‚¤ì›Œë“œ*: {{ $json.keyword }}\nğŸ“ˆ *ì„±ì¥ë¥ *: {{ $json.growth_rate }}\nğŸ‘€ *ì˜ˆìƒ ì¡°íšŒìˆ˜*: {{ $json.potential_views }}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ¯ *ì¶”ì²œ ë¯¸ì…˜*\n{{ $json.mission_title }}\n\nğŸ‘¤ *íƒ€ê²Ÿ í¬ë¦¬ì—ì´í„°*: {{ $json.target_creator }}\nğŸ’° *ì¶”ì²œ ì˜ˆì‚°*: {{ $json.mission_budget || 'TBD' }}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ’¡ *ì„±ê³µ ë°©ì •ì‹*\nâ€¢ *Hook*: {{ $json.winning_formula?.hook || 'N/A' }}\nâ€¢ *Visual*: {{ $json.winning_formula?.visual || 'N/A' }}\nâ€¢ *Sound*: {{ $json.winning_formula?.sound || 'N/A' }}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“Š *ì „ëµì  ì¸ì‚¬ì´íŠ¸*\n{{ $json.strategic_insight }}\n\nğŸ‘‰ <{{ $json.pdf_link }}|ì „ëµ ë¸Œë¦¬í”„ ë‹¤ìš´ë¡œë“œ>",
        "otherOptions": {
          "includeLinkToWorkflow": false
        }
      },
      "id": "slack-alert",
      "name": "Slack Alert",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [1100, 300],
      "notes": "Configure your Slack credentials"
    }
  ],
  "connections": {
    "Daily 9AM Trigger": {
      "main": [
        [
          { "node": "Get TikTok Trends (Mock)", "type": "main", "index": 0 },
          { "node": "Get Competitor Data (Mock)", "type": "main", "index": 0 }
        ]
      ]
    },
    "Get TikTok Trends (Mock)": {
      "main": [
        [{ "node": "Analyze Market Gaps", "type": "main", "index": 0 }]
      ]
    },
    "Get Competitor Data (Mock)": {
      "main": [
        [{ "node": "Analyze Market Gaps", "type": "main", "index": 0 }]
      ]
    },
    "Analyze Market Gaps": {
      "main": [
        [{ "node": "AI Strategic Analyst", "type": "main", "index": 0 }]
      ]
    },
    "OpenAI GPT-4 Turbo": {
      "ai_languageModel": [
        [{ "node": "AI Strategic Analyst", "type": "ai_languageModel", "index": 0 }]
      ]
    },
    "AI Strategic Analyst": {
      "main": [
        [{ "node": "Parse AI Response", "type": "main", "index": 0 }]
      ]
    },
    "Parse AI Response": {
      "main": [
        [{ "node": "Slack Alert", "type": "main", "index": 0 }]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "timezone": "Asia/Seoul"
  },
  "staticData": null,
  "tags": [
    { "name": "Market Insight" },
    { "name": "AI Agent" },
    { "name": "Blue Ocean" }
  ],
  "triggerCount": 1,
  "updatedAt": "2024-11-26T00:00:00.000Z",
  "versionId": "1"
}
